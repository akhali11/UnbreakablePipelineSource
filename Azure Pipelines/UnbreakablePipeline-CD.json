{"source":2,"revision":353,"description":null,"createdBy":{"displayName":"Safia Habib","url":"https://app.vssps.visualstudio.com/A430bc36c-817f-4d6f-ab28-91ed04b1d4f7/_apis/Identities/067a06f8-8dc4-6464-a496-111deb63d372","_links":{"avatar":{"href":"https://dev.azure.com/unbreakablepipeline/_apis/GraphProfile/MemberAvatars/aad.MDY3YTA2ZjgtOGRjNC03NDY0LWE0OTYtMTExZGViNjNkMzcy"}},"id":"067a06f8-8dc4-6464-a496-111deb63d372","uniqueName":"safia.abdullah@gmail.com","imageUrl":"https://dev.azure.com/unbreakablepipeline/_api/_common/identityImage?id=067a06f8-8dc4-6464-a496-111deb63d372","descriptor":"aad.MDY3YTA2ZjgtOGRjNC03NDY0LWE0OTYtMTExZGViNjNkMzcy"},"createdOn":"2018-10-25T13:56:33.067Z","modifiedBy":{"displayName":"Safia Habib","url":"https://app.vssps.visualstudio.com/A430bc36c-817f-4d6f-ab28-91ed04b1d4f7/_apis/Identities/067a06f8-8dc4-6464-a496-111deb63d372","_links":{"avatar":{"href":"https://dev.azure.com/unbreakablepipeline/_apis/GraphProfile/MemberAvatars/aad.MDY3YTA2ZjgtOGRjNC03NDY0LWE0OTYtMTExZGViNjNkMzcy"}},"id":"067a06f8-8dc4-6464-a496-111deb63d372","uniqueName":"safia.abdullah@gmail.com","imageUrl":"https://dev.azure.com/unbreakablepipeline/_api/_common/identityImage?id=067a06f8-8dc4-6464-a496-111deb63d372","descriptor":"aad.MDY3YTA2ZjgtOGRjNC03NDY0LWE0OTYtMTExZGViNjNkMzcy"},"modifiedOn":"2018-11-15T21:55:01.390Z","isDeleted":false,"variables":{"ApplicationName":{"value":"SampleDevOpsApp"},"DeploymentId":{"value":"56789"},"Dynatrace_API_TOKEN":{"value":"<Enter API Token>"},"Dynatrace_Tenant":{"value":"<Enter Tenant>"},"Dynatrace_Token":{"value":"<Enter Token>"},"SimulateBuildNumber":{"value":"1"}},"variableGroups":[],"environments":[{"id":9,"name":"Staging","rank":1,"owner":{"displayName":"Safia Habib","url":"https://app.vssps.visualstudio.com/A430bc36c-817f-4d6f-ab28-91ed04b1d4f7/_apis/Identities/067a06f8-8dc4-6464-a496-111deb63d372","_links":{"avatar":{"href":"https://dev.azure.com/unbreakablepipeline/_apis/GraphProfile/MemberAvatars/aad.MDY3YTA2ZjgtOGRjNC03NDY0LWE0OTYtMTExZGViNjNkMzcy"}},"id":"067a06f8-8dc4-6464-a496-111deb63d372","uniqueName":"safia.abdullah@gmail.com","imageUrl":"https://dev.azure.com/unbreakablepipeline/_api/_common/identityImage?id=067a06f8-8dc4-6464-a496-111deb63d372","descriptor":"aad.MDY3YTA2ZjgtOGRjNC03NDY0LWE0OTYtMTExZGViNjNkMzcy"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":26}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":27},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":75}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"Custom","tags":["Staging"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[{"artifactItems":[],"alias":"_UnbreakablePipeline-CI","artifactType":"Build","artifactDownloadMode":"All"}]},"queueId":23,"demands":[],"enableAccessToken":true,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":4,"name":"Deployment group job","workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Deploy Dynatrace Oneagent","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# Download and Install the Dynatrace OneAgent\n# Please provide Dynatrace Tenant and Tenant Token in the Variables section \n\nwget  -O Dynatrace-OneAgent-Linux.sh  $(Dynatrace_Tenant)\"/api/v1/deployment/installer/agent/unix/default/latest?Api-Token=\"$(Dynatrace_Token)\"&arch=x86&flavor=default\"\n\necho \"https://\"$(Dynatrace_Tenant)\"/api/v1/deployment/installer/agent/unix/default/latest?Api-Token=\"$(Dynatrace_Token)\"&arch=x86&flavor=default\"\n\nsudo /bin/sh Dynatrace-OneAgent-Linux.sh  APP_LOG_CONTENT_ACCESS=1 INFRA_ONLY=0\n\n","workingDirectory":"","failOnStderr":"false"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Install node and pm2","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# Install Npm\ncurl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -\nsudo apt-get install -y nodejs\nnpm -v\n\n# Install pm2\nsudo npm install pm2 -g\n\n","workingDirectory":"","failOnStderr":"false"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Copy the App to local Machine","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"pm2 delete all\nsleep 30;\nsudo rm -R /home/unbreakablepipeline/dynatrace\nsudo mkdir /home/unbreakablepipeline/dynatrace\nsudo chmod -R 777 /home/unbreakablepipeline/dynatrace\ncp -R $(System.DefaultWorkingDirectory)/_UnbreakablePipeline-CI/app /home/unbreakablepipeline/dynatrace\ncp $(System.DefaultWorkingDirectory)/_UnbreakablePipeline-CI/app/start_loadtest.sh /home/unbreakablepipeline/dynatrace\nsudo chmod 777 /home/unbreakablepipeline/dynatrace/app/app.js\nsudo chmod 777 /home/unbreakablepipeline/dynatrace/start_loadtest.sh\n","workingDirectory":"","failOnStderr":"false"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Deploy App","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"export DEPLOYMENT_GROUP_NAME=$(Release.EnvironmentName)\nexport APPLICATION_NAME=$(ApplicationName)\nexport DT_TAGS=DEPLOYMENT_GROUP_NAME=$(Release.EnvironmentName)\nexport DT_CUSTOM_PROP=\"DEPLOYMENT_ID=$(DeploymentId) DEPLOYMENT_GROUP_NAME=$(Release.EnvironmentName) APPLICATION_NAME=$(ApplicationName)\"\nexport DT_CLUSTER_ID=\"$(Release.EnvironmentName) $(ApplicationName)\"\nenv\n\n# now we launch our app\ncd /home/unbreakablepipeline/dynatrace/app\nsudo DT_TAGS=DEPLOYMENT_GROUP_NAME=$(Release.EnvironmentName) DEPLOYMENT_GROUP_NAME=$(Release.EnvironmentName) DT_CLUSTER_ID=\"$(Release.EnvironmentName) $(ApplicationName)\" BUILD_NUMBER=$(SimulateBuildNumber) pm2 start app.js\n\necho \"Deploying DEPLOYMENT_ID=\"  $(DeploymentId)\necho \"DEPLOYMENT_GROUP_NAME=\"  $(Release.EnvironmentName) \necho \"APPLICATION_NAME=\"$(ApplicationName)\necho \"DT-Tags=\" $DT_TAGS\necho \"DT_CLUSTER_ID=\"$DT_CLUSTER_ID\necho \"BUILD_NUMBER=\"$(SimulateBuildNumber)\n\n\n# now lets make sure the app is really up & running - execute a couple of requests using the x-dynatrace header to identify these requests in Dynatrace as startup tests\nsleep 5;\necho \"Running a simply set of curls to validate the service is up and running\"\ncurl -s \"http://localhost:8080/\" -H \"x-dynatrace: NA=StartUp.Homepage;\" -o nul &> startuptest.log\ncurl -s \"http://localhost:8080/version\" -H \"x-dynatrace: NA=StartUp.Version;\" -o nul &> startuptest.log\ncurl -s \"http://localhost:8080/api/echo?text=This is from a testing script\" -H \"x-dynatrace: NA=StartUp.Echo;\" -o nul &> startuptest.log\ncurl -s \"http://localhost:8080/api/invoke?url=http://www.dynatrace.com\" -H \"x-dynatrace: NA=StartUp.Invoke;\" -o nul &> startuptest.log\nsleep 5;\nexit 0\n\n","workingDirectory":"","failOnStderr":"false"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Run loadtest","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"$(System.DefaultWorkingDirectory)/_UnbreakablePipeline-CI/app/start_loadtest.sh","arguments":"","script":"export DEPLOYMENT_GROUP_NAME=$(Release.EnvironmentName)\n#cd /home/unbreakablepipeline/dynatrace\n# /bin/bash ./start_loadtest.sh &\n# sleep 120\nsudo chmod 777 /home/unbreakablepipeline/dynatrace/start_loadtest.sh\nsed -i -e 's/\\r$//' /home/unbreakablepipeline/dynatrace/start_loadtest.sh\nsudo DEPLOYMENT_GROUP_NAME=$DEPLOYMENT_GROUP_NAME nohup /home/unbreakablepipeline/dynatrace/start_loadtest.sh &>/dev/null &\nsleep 120;","workingDirectory":"","failOnStderr":"false"}},{"environment":{},"taskId":"bf193850-9137-11e8-be30-db4e5bcd7ef2","version":"0.*","name":"Dynatrace Push Deployment copy","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"dtToken":"$(Dynatrace_API_TOKEN)","dtTenantUrl":"$(Dynatrace_Tenant)","entityType":"SERVICE","tagContext":"ENVIRONMENT","tagName":"DEPLOYMENT_GROUP_NAME","tagValue":"$(Release.EnvironmentName)","deploymentName":"$(Release.DefinitionName)","deploymentVersion":"$(Release.ReleaseId)","deploymentProject":"$(System.TeamProject)","ciLink":"$(System.TeamFoundationCollectionUri)","jenkinsUrl":"$(System.TeamFoundationCollectionUri)","buildUrl":"$(Release.ReleaseUri)","gitCommit":"$(Release.Artifacts.{alias}.RequestedForID)"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":303,"url":"https://vsrm.dev.azure.com/unbreakablepipeline/f6ae8f0f-33e9-490f-82ac-2b1cfb3dffe9/_apis/Release/releases/303","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":29,"gatesOptions":{"isEnabled":true,"timeout":6,"samplingInterval":5,"stabilizationTime":2,"minimumSuccessDuration":0},"gates":[{"tasks":[{"environment":{},"taskId":"3950d550-9283-11e8-bc67-3dfa2c0696c1","version":"0.*","name":"Dynatrace Unbreakable Pipeline Release Gate ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"UnbreakableGateFunctionUrl":"https://YourFunctionName.azurewebsites.net/api/ProcessUnbreakableGate","UnbreakableGateFunctionKey":"<Function Key Value>","monspecUrl":"https://YourStorageURL.blob.core.windows.net/monspec/smplmonspec.json","pipelineInfoUrl":"https://YourStorageURL.blob.core.windows.net/monspec/smplpipelineinfo.json","dynatraceTennantUrl":"$(Dynatrace_Tenant)","dynatraceToken":"$(Dynatrace_API_TOKEN)","proxyUrl":"http://40.117.92.217:5000/api/DTCLIProxy/MonspecPullRequest","serviceToCompare":"SampleJSonService/StagingToProduction","compareWindow":"5","PlanUrl":"$(system.CollectionUri)","ProjectId":"$(system.TeamProjectId)","HubName":"$(system.HostType)","PlanId":"$(system.PlanId)","JobId":"$(system.JobId)","TimelineId":"$(system.TimelineId)","TaskInstanceId":"$(system.TaskInstanceId)","AuthToken":"Enter Token Value"}}]}]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/unbreakablepipeline/_apis/public/Release/badge/f6ae8f0f-33e9-490f-82ac-2b1cfb3dffe9/7/9"},{"id":21,"name":"Production","rank":2,"owner":{"displayName":"Safia Habib","url":"https://app.vssps.visualstudio.com/A430bc36c-817f-4d6f-ab28-91ed04b1d4f7/_apis/Identities/067a06f8-8dc4-6464-a496-111deb63d372","_links":{"avatar":{"href":"https://dev.azure.com/unbreakablepipeline/_apis/GraphProfile/MemberAvatars/aad.MDY3YTA2ZjgtOGRjNC03NDY0LWE0OTYtMTExZGViNjNkMzcy"}},"id":"067a06f8-8dc4-6464-a496-111deb63d372","uniqueName":"safia.abdullah@gmail.com","imageUrl":"https://dev.azure.com/unbreakablepipeline/_api/_common/identityImage?id=067a06f8-8dc4-6464-a496-111deb63d372","descriptor":"aad.MDY3YTA2ZjgtOGRjNC03NDY0LWE0OTYtMTExZGViNjNkMzcy"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":70}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":71},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":73}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"Custom","tags":["Production"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[{"artifactItems":[],"alias":"_UnbreakablePipeline-CI","artifactType":"Build","artifactDownloadMode":"All"}]},"queueId":23,"demands":[],"enableAccessToken":true,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":4,"name":"Deployment group job","workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Deploy Dynatrace Oneagent","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# Download and Install the Dynatrace OneAgent\n# Please provide Dynatrace Tenant and Tenant Token in the Variables section \n\nwget  -O Dynatrace-OneAgent-Linux.sh  $(Dynatrace_Tenant)\"/api/v1/deployment/installer/agent/unix/default/latest?Api-Token=\"$(Dynatrace_Token)\"&arch=x86&flavor=default\"\n\necho \"https://\"$(Dynatrace_Tenant)\"/api/v1/deployment/installer/agent/unix/default/latest?Api-Token=\"$(Dynatrace_Token)\"&arch=x86&flavor=default\"\n\nsudo /bin/sh Dynatrace-OneAgent-Linux.sh  APP_LOG_CONTENT_ACCESS=1 INFRA_ONLY=0\n\n","workingDirectory":"","failOnStderr":"false"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Install node and pm2","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# Install Npm\ncurl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -\nsudo apt-get install -y nodejs\nnpm -v\n\n# Install pm2\nsudo npm install pm2 -g\n\n","workingDirectory":"","failOnStderr":"false"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Copy the App to local Machine","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"pm2 delete all\nsleep 30;\nsudo rm -R /home/unbreakablepipeline/dynatrace\nsudo mkdir /home/unbreakablepipeline/dynatrace\nsudo chmod -R 777 /home/unbreakablepipeline/dynatrace\ncp -R $(System.DefaultWorkingDirectory)/_UnbreakablePipeline-CI/app /home/unbreakablepipeline/dynatrace\ncp $(System.DefaultWorkingDirectory)/_UnbreakablePipeline-CI/app/start_loadtest.sh /home/unbreakablepipeline/dynatrace\nsudo chmod 777 /home/unbreakablepipeline/dynatrace/app/app.js\nsudo chmod 777 /home/unbreakablepipeline/dynatrace/start_loadtest.sh\n","workingDirectory":"","failOnStderr":"false"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Deploy App","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"export DEPLOYMENT_GROUP_NAME=$(Release.EnvironmentName)\nexport APPLICATION_NAME=$(ApplicationName)\nexport BUILD_NUMBER=$(SimulateBuildNumber)\nexport DT_TAGS=DEPLOYMENT_GROUP_NAME=$(Release.EnvironmentName)\nexport DT_CUSTOM_PROP=\"DEPLOYMENT_ID=$(DeploymentId) DEPLOYMENT_GROUP_NAME=$(Release.EnvironmentName) APPLICATION_NAME=$(ApplicationName)\"\nexport DT_CLUSTER_ID=\"$(Release.EnvironmentName) $(ApplicationName)\"\nenv\n# now we launch our app\ncd /home/unbreakablepipeline/dynatrace/app\nsudo DT_TAGS=DEPLOYMENT_GROUP_NAME=$(Release.EnvironmentName) DEPLOYMENT_GROUP_NAME=$(Release.EnvironmentName) DT_CLUSTER_ID=\"$(Release.EnvironmentName) $(ApplicationName)\" DT_CUSTOM_PROP=\"BuildNumber=$(SimulateBuildNumber)\" BUILD_NUMBER=$(SimulateBuildNumber) pm2 start app.js\n\necho \"Deploying DEPLOYMENT_ID=\"  $(DeploymentId)\necho \"DEPLOYMENT_GROUP_NAME=\"  $(Release.EnvironmentName) \necho \"APPLICATION_NAME=\"$(ApplicationName)\necho \"DT-Tags=\" $DT_TAGS\necho \"DT_CLUSTER_ID=\"$DT_CLUSTER_ID\necho \"Build_Number=\"$(SimulateBuildNumber)\n\n# now lets make sure the app is really up & running - execute a couple of requests using the x-dynatrace header to identify these requests in Dynatrace as startup tests\nsleep 5;\necho \"Running a simply set of curls to validate the service is up and running\"\ncurl -s \"http://localhost:8080/\" -H \"x-dynatrace: NA=StartUp.Homepage;\" -o nul &> startuptest.log\ncurl -s \"http://localhost:8080/version\" -H \"x-dynatrace: NA=StartUp.Version;\" -o nul &> startuptest.log\ncurl -s \"http://localhost:8080/api/echo?text=This is from a testing script\" -H \"x-dynatrace: NA=StartUp.Echo;\" -o nul &> startuptest.log\ncurl -s \"http://localhost:8080/api/invoke?url=http://www.dynatrace.com\" -H \"x-dynatrace: NA=StartUp.Invoke;\" -o nul &> startuptest.log\nsleep 5;\nexit 0\n\n","workingDirectory":"","failOnStderr":"false"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Run loadtest","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"$(System.DefaultWorkingDirectory)/_UnbreakablePipeline-CI/app/start_loadtest.sh","arguments":"","script":"export DEPLOYMENT_GROUP_NAME=$(Release.EnvironmentName)\n#cd /home/unbreakablepipeline/dynatrace\n# /bin/bash ./start_loadtest.sh &\n# sleep 120\nsudo chmod 777 /home/unbreakablepipeline/dynatrace/start_loadtest.sh\nsed -i -e 's/\\r$//' /home/unbreakablepipeline/dynatrace/start_loadtest.sh\nsudo DEPLOYMENT_GROUP_NAME=$DEPLOYMENT_GROUP_NAME nohup /home/unbreakablepipeline/dynatrace/start_loadtest.sh &>/dev/null &\nsleep 120; \n","workingDirectory":"","failOnStderr":"false"}},{"environment":{},"taskId":"bf193850-9137-11e8-be30-db4e5bcd7ef2","version":"0.*","name":"Dynatrace Push Deployment copy","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"dtToken":"$(Dynatrace_API_TOKEN)","dtTenantUrl":"$(Dynatrace_Tenant)","entityType":"SERVICE","tagContext":"ENVIRONMENT","tagName":"DEPLOYMENT_GROUP_NAME","tagValue":"$(Release.EnvironmentName)","deploymentName":"$(Release.DefinitionName)","deploymentVersion":"$(Release.ReleaseId)","deploymentProject":"$(System.TeamProject)","ciLink":"$(System.TeamFoundationCollectionUri)","jenkinsUrl":"$(System.TeamFoundationCollectionUri)","buildUrl":"$(Release.ReleaseUri)","gitCommit":"$(Release.Artifacts.{alias}.RequestedForID)"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"Staging","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":303,"url":"https://vsrm.dev.azure.com/unbreakablepipeline/f6ae8f0f-33e9-490f-82ac-2b1cfb3dffe9/_apis/Release/releases/303","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":{"isEnabled":false,"timeout":6,"samplingInterval":5,"stabilizationTime":2,"minimumSuccessDuration":0},"gates":[{"tasks":[{"environment":{},"taskId":"3950d550-9283-11e8-bc67-3dfa2c0696c1","version":"0.*","name":"Dynatrace Unbreakable Pipeline Release Gate ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"UnbreakableGateFunctionUrl":"https://unbreakablepipelinefunction.azurewebsites.net/api/ProcessUnbreakableGate","UnbreakableGateFunctionKey":"vv47yGI8xRNZu1piZk/jYDOFhHaciWcH4F07da85k1jFyYIPTJK/nw==","monspecUrl":"https://unbreakablepipeline.blob.core.windows.net/monspec/smplmonspec.json","pipelineInfoUrl":"https://unbreakablepipeline.blob.core.windows.net/monspec/smplpipelineinfo.json","dynatraceTennantUrl":"$(Dynatrace_Tenant)","dynatraceToken":"$(Dynatrace_API_TOKEN)","proxyUrl":"http://40.117.92.217:5000/api/DTCLIProxy/MonspecPullRequest","serviceToCompare":"SampleJSonService/StagingToStagingLastHour","compareWindow":"5","PlanUrl":"$(system.CollectionUri)","ProjectId":"$(system.TeamProjectId)","HubName":"$(system.HostType)","PlanId":"$(system.PlanId)","JobId":"$(system.JobId)","TimelineId":"$(system.TimelineId)","TaskInstanceId":"$(system.TaskInstanceId)","AuthToken":"mfigubzuenuwezrco67epfg4drv6di45zd7k6dngy3yafo52jfra"}}]}]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/unbreakablepipeline/_apis/public/Release/badge/f6ae8f0f-33e9-490f-82ac-2b1cfb3dffe9/7/21"}],"artifacts":[{"sourceId":"f6ae8f0f-33e9-490f-82ac-2b1cfb3dffe9:15","type":"Build","alias":"_UnbreakablePipeline-CI","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://dev.azure.com/unbreakablepipeline/_permalink/_build/index?collectionId=38f54010-b5c4-41f0-88e0-3bca292f134a&projectId=f6ae8f0f-33e9-490f-82ac-2b1cfb3dffe9&definitionId=15","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"selectDuringReleaseCreationType","name":"Specify at the time of release creation"},"definition":{"id":"15","name":"UnbreakablePipeline-CI"},"definitions":{"id":"","name":""},"IsMultiDefinitionType":{"id":"False","name":"False"},"project":{"id":"f6ae8f0f-33e9-490f-82ac-2b1cfb3dffe9","name":"vstspipeline"},"repository":{"id":"af75b962-1439-4be0-8924-2439bf90a12e","name":"UnbreakablePipelineDynatraceProxy"}},"isPrimary":true,"isRetained":false}],"triggers":[],"releaseNameFormat":"Release-$(rev:r)","tags":[],"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"Other"}},"id":7,"name":"UnbreakablePipeline-CD","path":"\\","projectReference":null,"url":"https://vsrm.dev.azure.com/unbreakablepipeline/f6ae8f0f-33e9-490f-82ac-2b1cfb3dffe9/_apis/Release/definitions/7","_links":{"self":{"href":"https://vsrm.dev.azure.com/unbreakablepipeline/f6ae8f0f-33e9-490f-82ac-2b1cfb3dffe9/_apis/Release/definitions/7"},"web":{"href":"https://dev.azure.com/unbreakablepipeline/f6ae8f0f-33e9-490f-82ac-2b1cfb3dffe9/_release?definitionId=7"}}}